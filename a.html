<!DOCTYPE>
<html>
	<head>
		<meta charset="utf-8"/>
		<title> formdata file jquery ajax upload</title>
		<script src="./jquery.js"></script>
		<script src="./jquery.form.js"></script>
	</head>
<body>
<form class="form-horizontal" role="form" id="myForm" action="a.php" method="post" enctype="multipart/form-data">

	<input type="hidden" name="policy" value="">
	<input type="hidden" name="signature" value="">

	<div class="form-group">
		<label class="col-sm-2 control-label">说明:</label>
		<div class="col-sm-10">
			<p class="form-control-static ">ajax 文件上传 。</p>
		</div>
	</div>
	<div class="form-group">
		<label for="url" class="col-sm-2 control-label"><s>*</s>图片选择:</label>
		<div class="col-sm-7">
			<input type="file" name="file" id="file_upload" value=""class="form-control" placeholder="图片地址">
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-7">
			<a id="btnAjax" class="btn btn-info col-md-5 col-lg-offset-1" onclick="uploadByForm();">Ajax上传</a>
		</div>
	</div>
</form>
<script type="text/javascript">

/**
		 * ajax 上传。
		 */
		function uploadByForm() {
        		var formData = new FormData($("#myForm")[0]);//用form 表单直接 构造formData 对象; 就不需要下面的append 方法来为表单进行赋值了。
			
			//var formData = new FormData();//构造空对象，下面用append 方法赋值。
// 			formData.append("policy", "");
// 			formData.append("signature", "");
			formData.append("file", $("#file_upload")[0].files[0]);
			var url = "a.php";
			$.ajax({
				url : url,
				type : 'POST',
				data : formData,

				/** 
				 * 必须false才会避开jQuery对 formdata 的默认处理 
				 * XMLHttpRequest会对 formdata 进行正确的处理 
				 */
				processData : false,
				/** 
				 *必须false才会自动加上正确的Content-Type 
				 */
				contentType : false,
				success : function(responseStr) {
                                    alert("成功：" + JSON.stringify(responseStr));
					// 					var jsonObj = $.parseJSON(responseStr);//eval("("+responseStr+")");
				},
				error : function(responseStr) {
					alert("失败:" + JSON.stringify(responseStr));//将    json对象    转成    json字符串。
				}
			});
		}
</script>
	<a href="http://www.qiuye.com/reflection.php">我是神呀</a>

	<form action="http://tinyurl.com/create.php" method="post" target="_blank">
<table align="center" cellpadding="5" bgcolor="#E7E7F7"><tr><td>
<b>Enter a long URL to make <a href="http://tinyurl.com">tiny</a>:</b><br />
<input type="text" name="url" size="30"><input type="submit" name="submit" value="Make TinyURL!">
</td></tr></table>
<div id="clock"></div>
<script>
	
	function clock()
	{
		var date = new Date();
		var year = date.getFullYear();
		var month = date.getMonth();
		var day = date.getDay();
		var hours = date.getHours();
		var minutes = date.getMinutes();
		var seconds = date.getSeconds(); 
		document.getElementById('clock').innerHTML = year+'年'+month+'月'+day+'日'+hours+'时'+minutes+'分'+seconds+'秒';
		// time  = time - 1;
		// console.log(time,year,month,day,hours,minutes,seconds);
		// if(time > 0){
			// setTimeout("clock("+time+")",1000);
			setTimeout(clock,1000);
		// }
	}
	clock();
	//setTimeout('window.location.href="http://www.qiuye.com/a.php"',3000);
</script>
</form>
<a href="http://www.qiuye.com/a.php">链接</a>
</body>
</html>
